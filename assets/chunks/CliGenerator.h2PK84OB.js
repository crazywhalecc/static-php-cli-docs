import{d as le,h as b,k as A,y as Z,o as h,c as y,m as i,t,F as L,E as N,e as j,a1 as g,a2 as G,a3 as k,a4 as te,a as ne,a5 as M,q as oe,s as ae,_ as de}from"./framework.GQ61FypF.js";const ce={type:"external","arg-type":"custom",source:"amqp","lib-depends":["librabbitmq"],"ext-depends-windows":["openssl"]},ue={type:"external",source:"apcu"},be={type:"builtin"},pe={type:"builtin","arg-type":"with-prefix","lib-depends":["bzip2"]},re={type:"builtin"},ge={type:"builtin"},xe={type:"builtin","arg-type":"with","lib-depends":["curl"],"ext-depends-windows":["zlib","openssl"]},me={type:"builtin","arg-type-windows":"with"},he={type:"builtin","arg-type":"custom","arg-type-windows":"with","lib-depends":["libxml2","zlib"]},ye={type:"external",source:"ext-event","arg-type":"custom","lib-depends":["libevent"],"ext-depends":["openssl"],"ext-suggests":["sockets"]},ve={type:"builtin"},we={"arg-type":"custom",type:"builtin","lib-depends-unix":["libffi"],"lib-depends-windows":["libffi-win"]},fe={type:"builtin"},ze={type:"builtin"},qe={type:"builtin","lib-suggests":["openssl"]},ke={type:"builtin","arg-type":"custom","arg-type-windows":"with","lib-depends":["zlib","libpng"],"ext-depends":["zlib"],"lib-suggests":["libavif","libwebp","libjpeg","freetype"]},Ee={type:"builtin","arg-type":"with-prefix","lib-depends":["gettext"]},_e={type:"external","arg-type":"custom",source:"ext-glfw","lib-depends":["glfw"],"lib-depends-windows":[]},Se={type:"builtin","arg-type":"with-prefix","lib-depends":["gmp"]},Ce={type:"builtin","arg-type":"with-prefix","arg-type-windows":"with","lib-depends-unix":["libiconv"],"lib-depends-windows":["libiconv-win"]},De={type:"external",source:"igbinary"},Ie={type:"external",source:"ext-imagick","arg-type":"custom","lib-depends":["imagemagick"]},Le={type:"builtin","arg-type":"custom","lib-depends":["imap"],"lib-suggests":["openssl"]},Ne={type:"external",source:"inotify"},Oe={type:"builtin","lib-depends":["icu"]},Ve={type:"builtin","arg-type":"with-prefix","lib-depends":["ldap"],"lib-suggests":["gmp","libsodium"],"ext-suggests":["openssl"]},Pe={type:"builtin","arg-type":"custom","ext-depends":["mbstring"],"lib-depends":["onig"]},Ae={type:"builtin","arg-type":"custom"},Te={type:"external",source:"ext-memcache","arg-type":"custom","lib-depends":["zlib"],"ext-depends":["session"]},Ue={type:"external",source:"memcached","arg-type":"custom","cpp-extension":!0,"lib-depends":["libmemcached"],"ext-depends":["session","zlib"]},Be={type:"external",source:"mongodb","arg-type":"custom","lib-suggests":["icu","openssl","zstd","zlib"]},$e={type:"builtin","arg-type":"with","ext-depends":["mysqlnd"]},je={type:"builtin","arg-type-windows":"with","lib-depends":["zlib"]},Ge={type:"builtin","arg-type":"custom"},Me={type:"builtin","arg-type":"custom","arg-type-windows":"with","lib-depends":["openssl","zlib"],"ext-depends":["zlib"]},He={type:"builtin","unix-only":!0},Re={type:"builtin"},Fe={type:"builtin","arg-type":"with","ext-depends":["pdo","mysqlnd"]},Ze={type:"builtin","arg-type":"with-prefix","ext-depends":["pdo","pgsql"],"lib-depends":["postgresql"]},Qe={type:"builtin","arg-type":"with","ext-depends":["pdo","sqlite3"],"lib-depends":["sqlite"]},We={type:"builtin","arg-type":"with-prefix","lib-depends":["postgresql"]},Ke={type:"builtin","ext-depends":["zlib"]},Ye={type:"builtin","unix-only":!0},Je={type:"external",source:"protobuf"},Xe={type:"external",source:"rar","cpp-extension":!0},ei={type:"builtin","arg-type":"with-prefix","lib-depends":["readline"]},ii={type:"external",source:"redis","arg-type":"custom","ext-suggests":["session","igbinary"],"lib-suggests":["zstd","liblz4"]},si={type:"builtin"},li={type:"builtin"},ti={type:"builtin","arg-type":"custom","lib-depends":["libxml2"],"ext-depends-windows":["xml"]},ni={type:"external",source:"ext-snappy","cpp-extension":!0,"arg-type":"custom","lib-depends":["snappy"],"ext-suggest":["apcu"]},oi={type:"builtin","arg-type":"custom","lib-depends":["libxml2"],"ext-depends-windows":["xml"]},ai={type:"builtin"},di={type:"builtin","arg-type":"with","lib-depends":["libsodium"]},ci={type:"builtin","arg-type":"with-prefix","arg-type-windows":"with","lib-depends":["sqlite"]},ui={type:"external",source:"sqlsrv","lib-depends":["unixodbc"],"ext-depends-linux":["pcntl"],"cpp-extension":!0},bi={type:"external",source:"ext-ssh2","arg-type":"with-prefix","arg-type-windows":"with","lib-depends":["libssh2"],"ext-depends-windows":["openssl","zlib"]},pi={type:"external",source:"swoole","arg-type":"custom","cpp-extension":!0,"unix-only":!0,"lib-depends":["libcares","brotli","nghttp2","zlib"],"ext-depends":["openssl","curl"],"ext-suggests":["swoole-hook-pgsql","swoole-hook-mysql","swoole-hook-sqlite"]},ri={type:"external",source:"swow","arg-type":"custom","lib-suggests":["openssl","curl"],"ext-suggests":["openssl","curl"]},gi={type:"builtin","unix-only":!0},xi={type:"builtin","unix-only":!0},mi={type:"builtin"},hi={type:"builtin","arg-type":"with-prefix","lib-depends":["tidy"]},yi={type:"builtin"},vi={type:"external",source:"ext-uuid","arg-type":"with-prefix","lib-depends":["libuuid"]},wi={type:"external",source:"ext-uv","arg-type":"with-prefix","lib-depends":["libuv"],"ext-depends":["sockets"]},fi={type:"external",source:"xhprof","ext-depends":["ctype"]},zi={type:"external",source:"xlswriter","arg-type":"custom","ext-depends":["zlib","zip"]},qi={type:"builtin","arg-type":"custom","arg-type-windows":"with","lib-depends":["libxml2"],"ext-depends-windows":["iconv"]},ki={type:"builtin","arg-type":"custom","lib-depends":["libxml2"],"ext-depends-windows":["xml","dom"]},Ei={type:"builtin","arg-type":"custom","lib-depends":["libxml2"],"ext-depends-windows":["xml"]},_i={type:"builtin","arg-type":"with-prefix","lib-depends":["libxslt"],"ext-depends":["xml","dom"]},Si={type:"external",source:"yaml","arg-type":"with-prefix","lib-depends":["libyaml"]},Ci={type:"builtin","arg-type":"with-prefix","arg-type-windows":"enable","lib-depends":["libzip"]},Di={type:"builtin","arg-type":"custom","arg-type-windows":"enable","lib-depends":["zlib"]},Ii={type:"external",source:"ext-zstd","arg-type":"custom","lib-depends":["zstd"]},Li={amqp:ce,apcu:ue,bcmath:be,bz2:pe,calendar:re,ctype:ge,curl:xe,dba:me,dom:he,event:ye,exif:ve,ffi:we,fileinfo:fe,filter:ze,ftp:qe,gd:ke,gettext:Ee,glfw:_e,gmp:Se,iconv:Ce,igbinary:De,imagick:Ie,imap:Le,inotify:Ne,intl:Oe,ldap:Ve,mbregex:Pe,mbstring:Ae,memcache:Te,memcached:Ue,mongodb:Be,mysqli:$e,mysqlnd:je,opcache:Ge,openssl:Me,"password-argon2":{type:"builtin","arg-type":"with-prefix","lib-depends":["libargon2"]},pcntl:He,pdo:Re,pdo_mysql:Fe,pdo_pgsql:Ze,pdo_sqlite:Qe,pgsql:We,phar:Ke,posix:Ye,protobuf:Je,rar:Xe,readline:ei,redis:ii,session:si,shmop:li,simplexml:ti,snappy:ni,soap:oi,sockets:ai,sodium:di,sqlite3:ci,sqlsrv:ui,ssh2:bi,swoole:pi,"swoole-hook-mysql":{type:"addon","arg-type":"custom","ext-depends":["mysqlnd","pdo","pdo_mysql"],"ext-suggests":["mysqli"]},"swoole-hook-pgsql":{type:"addon","arg-type":"custom","ext-depends":["pgsql","pdo"]},"swoole-hook-sqlite":{type:"addon","arg-type":"custom","ext-depends":["sqlite3","pdo"]},swow:ri,sysvmsg:gi,sysvsem:xi,sysvshm:mi,tidy:hi,tokenizer:yi,uuid:vi,uv:wi,xhprof:fi,xlswriter:zi,xml:qi,xmlreader:ki,xmlwriter:Ei,xsl:_i,yaml:Si,zip:Ci,zlib:Di,zstd:Ii},Ni={source:"brotli","static-libs-unix":["libbrotlidec.a","libbrotlienc.a","libbrotlicommon.a"],"static-libs-windows":["brotlicommon.lib","brotlienc.lib","brotlidec.lib"],headers:["brotli"]},Oi={source:"bzip2","static-libs-unix":["libbz2.a"],"static-libs-windows":[["libbz2.lib","libbz2_a.lib"]],headers:["bzlib.h"]},Vi={source:"curl","static-libs-unix":["libcurl.a"],"static-libs-windows":["libcurl.lib"],headers:["curl"],"lib-depends-unix":["openssl","zlib"],"lib-depends-windows":["openssl","zlib","libssh2","nghttp2"],"lib-suggests-unix":["libssh2","brotli","nghttp2","zstd"],"lib-suggests-windows":["brotli","zstd"],frameworks:["CoreFoundation","CoreServices","SystemConfiguration"]},Pi={source:"freetype","static-libs-unix":["libfreetype.a"],"headers-unix":["freetype2/freetype/freetype.h","freetype2/ft2build.h"],"lib-depends":["zlib"],"lib-suggests":["libpng","bzip2","brotli"]},Ai={source:"gettext","static-libs-unix":["libintl.a"],"lib-depends":["libiconv"],"lib-suggests":["ncurses","libxml2"],frameworks:["CoreFoundation"]},Ti={source:"ext-glfw","static-libs-unix":["libglfw3.a"],frameworks:["CoreVideo","OpenGL","Cocoa","IOKit"]},Ui={source:"gmp","static-libs-unix":["libgmp.a"],"static-libs-windows":["libgmp.lib"],headers:["gmp.h"]},Bi={source:"icu","cpp-library":!0,"static-libs-unix":["libicui18n.a","libicuio.a","libicuuc.a","libicudata.a"]},$i={source:"imagemagick","static-libs-unix":["libMagick++-7.Q16HDRI.a","libMagickWand-7.Q16HDRI.a","libMagickCore-7.Q16HDRI.a"],"lib-depends":["zlib","libpng","libjpeg","libwebp","freetype","libtiff"],"lib-suggests":["zstd","xz","bzip2","libzip","libxml2"]},ji={source:"imap","static-libs-unix":["libc-client.a"],"lib-suggests":["openssl"]},Gi={source:"ldap","static-libs-unix":["liblber.a","libldap.a"],"lib-depends":["openssl","zlib","gmp","libsodium"]},Mi={source:"libargon2","static-libs-unix":["libargon2.a"]},Hi={source:"libavif","static-libs-unix":["libavif.a"]},Ri={source:"libcares","static-libs-unix":["libcares.a"],"headers-unix":["ares.h","ares_dns.h","ares_nameser.h","ares_rules.h"]},Fi={source:"libevent","static-libs-unix":["libevent.a","libevent_core.a","libevent_extra.a","libevent_openssl.a"],"lib-depends":["openssl"]},Zi={source:"libffi","static-libs-unix":["libffi.a"],"static-libs-windows":["libffi.lib"],"headers-unix":["ffi.h","ffitarget.h"],"headers-windows":["ffi.h","fficonfig.h","ffitarget.h"]},Qi={source:"libiconv","static-libs-unix":["libiconv.a","libcharset.a"],headers:["iconv.h","libcharset.h","localcharset.h"]},Wi={source:"libjpeg","static-libs-unix":["libjpeg.a","libturbojpeg.a"]},Ki={source:"liblz4","static-libs-unix":["liblz4.a"]},Yi={source:"libmemcached","static-libs-unix":["libmemcached.a","libmemcachedutil.a"]},Ji={source:"libpng","static-libs-unix":["libpng16.a"],"static-libs-windows":["libpng16_static.lib"],"headers-unix":["png.h","pngconf.h","pnglibconf.h"],"headers-windows":["png.h","pngconf.h"],"lib-depends":["zlib"]},Xi={source:"librabbitmq","static-libs-unix":["librabbitmq.a"],"static-libs-windows":["rabbitmq.4.lib"],"lib-depends":["openssl"]},es={source:"libsodium","static-libs-unix":["libsodium.a"]},is={source:"libssh2","static-libs-unix":["libssh2.a"],"static-libs-windows":["libssh2.lib"],headers:["libssh2.h","libssh2_publickey.h","libssh2_sftp.h"],"lib-depends":["openssl"],"lib-suggests":["zlib"]},ss={source:"libtiff","static-libs-unix":["libtiff.a"]},ls={source:"libuuid","static-libs-unix":["libuuid.a"]},ts={source:"libuv","static-libs-unix":["libuv.a"]},ns={source:"libwebp","static-libs-unix":["libwebp.a","libwebpdecoder.a","libwebpdemux.a","libwebpmux.a","libsharpyuv.a"]},os={source:"libxml2","static-libs-unix":["libxml2.a"],"static-libs-windows":["libxml2s.lib","libxml2_a.lib"],headers:["libxml2"],"lib-depends-unix":["libiconv"],"lib-suggests-unix":["xz","icu","zlib"],"lib-depends-windows":["libiconv-win"],"lib-suggests-windows":["zlib"]},as={source:"libxslt","static-libs-unix":["libxslt.a","libexslt.a"],"lib-depends":["libxml2"]},ds={source:"libyaml","static-libs-unix":["libyaml.a"],"static-libs-windows":["yaml.lib"],headers:["yaml.h"]},cs={source:"libzip","static-libs-unix":["libzip.a"],"static-libs-windows":[["zip.lib","libzip_a.lib"]],headers:["zip.h","zipconf.h"],"lib-depends":["zlib"],"lib-suggests":["bzip2","xz","zstd","openssl"]},us={source:"ncurses","static-libs-unix":["libncurses.a"]},bs={source:"nghttp2","static-libs-unix":["libnghttp2.a"],"static-libs-windows":["nghttp2.lib"],headers:["nghttp2"],"lib-depends":["zlib","openssl"],"lib-suggests":["libxml2"]},ps={source:"onig","static-libs-unix":["libonig.a"],"static-libs-windows":["onig.lib","onig_a.lib"],headers:["oniggnu.h","oniguruma.h"]},rs={source:"openssl","static-libs-unix":["libssl.a","libcrypto.a"],"static-libs-windows":["libssl.lib","libcrypto.lib"],headers:["openssl"],"lib-depends":["zlib"]},gs={source:"postgresql","static-libs-unix":["libpq.a","libpgport.a","libpgcommon.a"],"lib-depends":["libiconv","libxml2","openssl","zlib","readline"],"lib-suggests":["icu","libxslt","ldap","zstd"]},xs={source:"readline","static-libs-unix":["libreadline.a"],"lib-depends":["ncurses"]},ms={source:"snappy","static-libs-unix":["libsnappy.a"],"headers-unix":["snappy.h","snappy-c.h","snappy-sinksource.h","snappy-stubs-public.h"],"lib-depends":["zlib"]},hs={source:"sqlite","static-libs-unix":["libsqlite3.a"],"static-libs-windows":["libsqlite3_a.lib"],headers:["sqlite3.h","sqlite3ext.h"]},ys={source:"tidy","static-libs-unix":["libtidy.a"]},vs={source:"unixodbc","static-libs-unix":["libodbc.a","libodbccr.a","libodbcinst.a"],"lib-depends":["libiconv"]},ws={source:"xz","static-libs-unix":["liblzma.a"],"static-libs-windows":[["liblzma.lib","liblzma_a.lib"]],"headers-unix":["lzma"],"headers-windows":["lzma","lzma.h"],"lib-depends":["libiconv"]},fs={source:"zlib","static-libs-unix":["libz.a"],"static-libs-windows":["zlib_a.lib"],headers:["zlib.h","zconf.h"]},zs={source:"zstd","static-libs-unix":["libzstd.a"],"static-libs-windows":[["zstd.lib","zstd_static.lib"]],"headers-unix":["zdict.h","zstd.h","zstd_errors.h"],"headers-windows":["zstd.h","zstd_errors.h"]},qs={brotli:Ni,bzip2:Oi,curl:Vi,freetype:Pi,gettext:Ai,glfw:Ti,gmp:Ui,icu:Bi,imagemagick:$i,imap:ji,ldap:Gi,libargon2:Mi,libavif:Hi,libcares:Ri,libevent:Fi,libffi:Zi,"libffi-win":{source:"libffi-win","static-libs-windows":["libffi.lib"],"headers-windows":["ffi.h","ffitarget.h","fficonfig.h"]},libiconv:Qi,"libiconv-win":{source:"libiconv-win","static-libs-windows":["libiconv.lib","libiconv_a.lib"]},libjpeg:Wi,liblz4:Ki,libmemcached:Yi,libpng:Ji,librabbitmq:Xi,libsodium:es,libssh2:is,libtiff:ss,libuuid:ls,libuv:ts,libwebp:ns,libxml2:os,libxslt:as,libyaml:ds,libzip:cs,ncurses:us,nghttp2:bs,onig:ps,openssl:rs,"pkg-config":{source:"pkg-config"},postgresql:gs,readline:xs,snappy:ms,sqlite:hs,tidy:ys,unixodbc:vs,xz:ws,zlib:fs,zstd:zs};function E(e,s,o,d){return e.os==="linux"?e[s][o][d+"-linux"]??e[s][o][d+"-unix"]??e[s][o][d]??[]:e.os==="macos"?e[s][o][d+"-macos"]??e[s][o][d+"-unix"]??e[s][o][d]??[]:[]}function Q(e,s){return E(e,"ext",s,"ext-depends")}function ks(e,s){return E(e,"ext",s,"ext-suggests")}function Es(e,s){return E(e,"ext",s,"lib-depends")}function _s(e,s){return E(e,"ext",s,"lib-suggests")}function W(e,s){return E(e,"lib",s,"lib-depends")}function Ss(e,s){return E(e,"lib",s,"lib-suggests")}function Cs(e,s){const o=[],d=new Set,x=[];s.forEach(a=>{d.has(a)||Ls(e,a,d,o)});const w=[];return o.forEach(a=>{s.indexOf(a)===-1&&x.push(a),[...Es(e,a),..._s(e,a)].forEach(V=>{w.indexOf(V)===-1&&w.push(V)})}),{exts:o,libs:Ds(e,w),notIncludedExts:x}}function Ds(e,s){const o=[],d=new Set;return s.forEach(x=>{d.has(x)||(console.log("before visited"),console.log(d),Is(e,x,d,o),console.log("after visited"),console.log(d))}),o}function Is(e,s,o,d){if(o.has(s))return;o.add(s),[...W(e,s),...Ss(e,s)].forEach(w=>{K(e,w,o,d)}),d.push(s)}function K(e,s,o,d){o.has(s)||(o.add(s),W(e,s).forEach(x=>{K(e,x,o,d)}),d.push(s))}function Y(e,s,o,d){o.has(o)||(o.add(s),Q(e,s).forEach(x=>{Y(e,x,o,d)}),d.push(s))}function Ls(e,s,o,d){if(o.has(s))return;o.add(s),[...Q(e,s),...ks(e,s)].forEach(w=>{Y(e,w,o,d)}),d.push(s)}const O=e=>(oe("data-v-1cdb3adf"),e=e(),ae(),e),Ns={class:"option-line"},Os=["id","value","disabled"],Vs=["for"],Ps={class:"box"},As={class:"ext-item"},Ts=["id","value","disabled"],Us=["for"],Bs={class:"details custom-block"},$s={class:"box"},js={class:"ext-item"},Gs=["id","value","disabled"],Ms=["for"],Hs={class:"tip custom-block"},Rs=O(()=>i("p",{class:"custom-block-title"},"TIP",-1)),Fs={class:"box"},Zs={class:"ext-item"},Qs=["id","value"],Ws=["for"],Ks={key:0,class:"warning custom-block"},Ys=O(()=>i("p",{class:"custom-block-title"},"WARNING",-1)),Js={class:"option-line"},Xs={class:"option-title"},el={value:"native"},il={value:"spc"},sl={value:"docker"},ll={key:1,class:"option-line"},tl={class:"option-title"},nl=O(()=>i("option",{value:"x86_64"},"x86_64 (amd64)",-1)),ol=O(()=>i("option",{value:"aarch64"},"aarch64 (arm64)",-1)),al=[nl,ol],dl={class:"option-line"},cl={class:"option-title"},ul=["value"],bl={class:"option-line"},pl={class:"option-title"},rl={for:"debug-yes"},gl={for:"debug-no"},xl={class:"option-line"},ml={class:"option-title"},hl={for:"zts-yes"},yl={for:"zts-no"},vl={class:"option-line"},wl={class:"option-title"},fl={for:"show-download-yes"},zl={for:"show-download-no"},ql=["placeholder"],kl={key:2,class:"command-container"},El={class:"command-preview"},_l=O(()=>i("br",null,null,-1)),Sl={key:3,class:"command-container"},Cl={class:"command-preview"},Dl={key:4,class:"command-container"},Il={class:"command-preview"},Ll={class:"command-container"},Nl={class:"command-preview"},Ol={name:"CliGenerator"},Vl=le({...Ol,props:{lang:{type:String,default:"zh"}},setup(e){const s=b(Li),o=b(qs),d=b([]),x=[{os:"linux",label:"Linux",disabled:!1},{os:"macos",label:"macOS",disabled:!1},{os:"windows",label:"Windows",disabled:!0}],w=["7.4","8.0","8.1","8.2","8.3"],a={zh:{selectExt:"选择扩展",buildTarget:"选择编译目标",buildOptions:"编译选项",buildEnvironment:"编译环境",buildEnvNative:"本地构建（Git 源码）",buildEnvSpc:"本地构建（独立 spc 二进制）",buildEnvDocker:"Alpine Docker 构建",useDebug:"是否开启调试输出",yes:"是",no:"否",resultShow:"结果展示",selectCommon:"选择常用扩展",selectNone:"全部取消选择",useZTS:"是否编译线程安全版",hardcodedINI:"硬编码 INI 选项",hardcodedINIPlacehoder:"如需要硬编码 ini，每行写一个，例如：memory_limit=2G",resultShowDownload:"是否展示仅下载对应扩展依赖的命令",downloadExtOnlyCommand:"只下载对应扩展的依赖包命令",downloadAllCommand:"下载所有依赖包命令",compileCommand:"编译命令",downloadPhpVersion:"下载 PHP 版本",downloadSPCBinaryCommand:"下载 spc 二进制命令",selectedArch:"选择系统架构",selectedSystem:"选择操作系统",buildLibs:"要构建的库",depTips:"选择扩展后，不可选中的项目为必需的依赖，编译的依赖库列表中可选的为现有扩展和依赖库的可选依赖。选择可选依赖后，将生成 --with-libs 参数。",microUnavailable:"micro 不支持 PHP 7.4 及更早版本！"},en:{selectExt:"Select Extensions",buildTarget:"Build Target",buildOptions:"Build Options",buildEnvironment:"Build Environment",buildEnvNative:"Native build (Git source code)",buildEnvSpc:"Native build (standalone spc binary)",buildEnvDocker:"Alpine docker build",useDebug:"Enable debug message",yes:"Yes",no:"No",resultShow:"Result",selectCommon:"Select common extensions",selectNone:"Unselect all",useZTS:"Enable ZTS",hardcodedINI:"Hardcoded INI options",hardcodedINIPlacehoder:"If you need to hardcode ini, write one per line, for example: memory_limit=2G",resultShowDownload:"Download with corresponding extension dependencies",downloadExtOnlyCommand:"Download sources by extensions command",downloadAllCommand:"Download all sources command",compileCommand:"Compile command",downloadPhpVersion:"Download PHP version",downloadSPCBinaryCommand:"Download spc binary command",selectedArch:"Select build architecture",selectedSystem:"Select Build OS",buildLibs:"Select Dependencies",depTips:"After selecting the extensions, the unselectable items are essential dependencies. In the compiled dependencies list, optional dependencies consist of existing extensions and optional dependencies of libraries. Optional dependencies will be added in --with-libs parameter.",microUnavailable:"Micro does not support PHP 7.4 and earlier versions!"}},H=["cli","fpm","micro","embed","all"],V=()=>{m.value=["apcu","bcmath","calendar","ctype","curl","dba","dom","exif","filter","fileinfo","gd","iconv","intl","mbstring","mbregex","mysqli","mysqlnd","openssl","opcache","pcntl","pdo","pdo_mysql","pdo_sqlite","pdo_pgsql","pgsql","phar","posix","readline","redis","session","simplexml","sockets","sodium","sqlite3","tokenizer","xml","xmlreader","xmlwriter","xsl","zip","zlib"]},R=A(()=>m.value.join(",")),J=A(()=>{const p=z.value.filter(n=>P.value.indexOf(n)===-1);return p.length>0?' --with-libs="'+p.join(",")+'"':""}),m=b([]),z=b([]),T=b([]),P=b([]),f=b(["cli"]),_=b("native"),S=b("8.2"),q=b(0),C=b(0),D=b(1),U=b(""),v=b("linux"),B=b("x86_64"),$=A(()=>{switch(_.value){case"native":return"bin/spc";case"spc":return"./spc";case"docker":return"bin/spc-alpine-docker";default:return""}}),F=b("--build-cli"),X=A(()=>{const p=U.value.split(`
`);let n=[];return p.forEach(l=>{l.indexOf("=")>=1&&n.push(l)})," "+n.map(l=>'-I "'+l+'"').join(" ")}),ee=p=>{let n;f.value.indexOf("all")!==-1&&p.target.value==="all"?f.value=["all"]:(n=f.value.indexOf("all"))!==-1&&p.target.value!=="all"&&f.value.splice(n,1),F.value=f.value.map(l=>"--build-"+l).join(" ")},ie=p=>{const n=new Set,l=u=>{let c=[];if(v.value==="linux"){if(c=s.value[u]["ext-depends-linux"]??s.value[u]["ext-depends-unix"]??s.value[u]["ext-depends"]??[],c.length===0)return}else if(v.value==="macos"&&(c=s.value[u]["ext-depends-macos"]??s.value[u]["ext-depends-unix"]??s.value[u]["ext-depends"]??[],c.length===0))return;c.forEach(r=>{n.add(r),l(r)})};return p.forEach(u=>{l(u)}),Array.from(n)},se=p=>{const n=new Set,l=c=>{let r=[];if(v.value==="linux"){if(r=o.value[c]["lib-depends-linux"]??o.value[c]["lib-depends-unix"]??o.value[c]["lib-depends"]??[],r.length===0)return}else if(v.value==="macos"&&(r=o.value[c]["lib-depends-macos"]??o.value[c]["lib-depends-unix"]??o.value[c]["lib-depends"]??[],r.length===0))return;r.forEach(I=>{n.add(I),l(I)})},u=c=>{let r=[];if(v.value==="linux"){if(r=s.value[c]["lib-depends-linux"]??s.value[c]["lib-depends-unix"]??s.value[c]["lib-depends"]??[],r.length===0)return}else if(v.value==="macos"&&(r=s.value[c]["lib-depends-macos"]??s.value[c]["lib-depends-unix"]??s.value[c]["lib-depends"]??[],r.length===0))return;r.forEach(I=>{n.add(I),l(I)})};return p.forEach(c=>{u(c)}),Array.from(n)};return Z(v,()=>m.value=[]),Z(m,p=>{T.value=ie(p),T.value.forEach(l=>{m.value.indexOf(l)===-1&&m.value.push(l)}),m.value.sort(),console.log("检测到变化！"),console.log(p);const n=Cs({ext:s.value,lib:o.value,os:v.value},m.value);d.value=n.libs.sort(),z.value=[],P.value=se(n.exts),P.value.forEach(l=>{z.value.indexOf(l)===-1&&z.value.push(l)})}),(p,n)=>(h(),y("div",null,[i("h2",null,t(a[e.lang].selectedSystem),1),i("div",Ns,[(h(),y(L,null,N(x,(l,u)=>i("span",{key:u,style:{"margin-right":"4px"}},[g(i("input",{type:"radio",id:"os-"+l.os,value:l.os,disabled:l.disabled===!0,"onUpdate:modelValue":n[0]||(n[0]=c=>v.value=c)},null,8,Os),[[k,v.value]]),i("label",{for:"os-"+l.os},t(l.label),9,Vs)])),64))]),i("h2",null,t(a[e.lang].selectExt)+t(m.value.length>0?" ("+m.value.length+")":""),1),i("div",Ps,[(h(!0),y(L,null,N(s.value,(l,u)=>(h(),y("div",As,[g(i("input",{type:"checkbox",id:u,value:u,"onUpdate:modelValue":n[1]||(n[1]=c=>m.value=c),disabled:T.value.indexOf(u)!==-1},null,8,Ts),[[M,m.value]]),i("label",{for:u},t(u),9,Us)]))),256))]),i("div",{class:"my-btn",onClick:V},t(a[e.lang].selectCommon),1),i("div",{class:"my-btn",onClick:n[2]||(n[2]=l=>m.value=[])},t(a[e.lang].selectNone),1),i("details",Bs,[i("summary",null,t(a[e.lang].buildLibs)+t(z.value.length>0?" ("+z.value.length+")":""),1),i("div",$s,[(h(!0),y(L,null,N(d.value,(l,u)=>(h(),y("div",js,[g(i("input",{type:"checkbox",id:u,value:l,"onUpdate:modelValue":n[3]||(n[3]=c=>z.value=c),disabled:P.value.indexOf(l)!==-1},null,8,Gs),[[M,z.value]]),i("label",{for:u},t(l),9,Ms)]))),256))])]),i("div",Hs,[Rs,i("p",null,t(a[e.lang].depTips),1)]),i("h2",null,t(a[e.lang].buildTarget),1),i("div",Fs,[(h(),y(L,null,N(H,l=>i("div",Zs,[g(i("input",{type:"checkbox",id:"build_"+l,value:l,"onUpdate:modelValue":n[4]||(n[4]=u=>f.value=u),onChange:ee},null,40,Qs),[[M,f.value]]),i("label",{for:"build_"+l},t(l),9,Ws)])),64))]),S.value==="7.4"&&(f.value.indexOf("micro")!==-1||f.value.indexOf("all")!==-1)?(h(),y("div",Ks,[Ys,i("p",null,t(a[e.lang].microUnavailable),1)])):j("",!0),i("h2",null,t(a[e.lang].buildOptions),1),i("div",Js,[i("span",Xs,t(a[e.lang].buildEnvironment),1),g(i("select",{"onUpdate:modelValue":n[5]||(n[5]=l=>_.value=l)},[i("option",el,t(a[e.lang].buildEnvNative),1),i("option",il,t(a[e.lang].buildEnvSpc),1),i("option",sl,t(a[e.lang].buildEnvDocker),1)],512),[[G,_.value]])]),_.value==="spc"?(h(),y("div",ll,[i("span",tl,t(a[e.lang].selectedArch),1),g(i("select",{"onUpdate:modelValue":n[6]||(n[6]=l=>B.value=l)},al,512),[[G,B.value]])])):j("",!0),i("div",dl,[i("span",cl,t(a[e.lang].downloadPhpVersion),1),g(i("select",{"onUpdate:modelValue":n[7]||(n[7]=l=>S.value=l)},[(h(),y(L,null,N(w,l=>i("option",{value:l},t(l),9,ul)),64))],512),[[G,S.value]])]),i("div",bl,[i("span",pl,t(a[e.lang].useDebug),1),g(i("input",{type:"radio",id:"debug-yes",value:1,"onUpdate:modelValue":n[8]||(n[8]=l=>q.value=l)},null,512),[[k,q.value]]),i("label",rl,t(a[e.lang].yes),1),g(i("input",{type:"radio",id:"debug-no",value:0,"onUpdate:modelValue":n[9]||(n[9]=l=>q.value=l)},null,512),[[k,q.value]]),i("label",gl,t(a[e.lang].no),1)]),i("div",xl,[i("span",ml,t(a[e.lang].useZTS),1),g(i("input",{type:"radio",id:"zts-yes",value:1,"onUpdate:modelValue":n[10]||(n[10]=l=>C.value=l)},null,512),[[k,C.value]]),i("label",hl,t(a[e.lang].yes),1),g(i("input",{type:"radio",id:"zts-no",value:0,"onUpdate:modelValue":n[11]||(n[11]=l=>C.value=l)},null,512),[[k,C.value]]),i("label",yl,t(a[e.lang].no),1)]),i("div",vl,[i("span",wl,t(a[e.lang].resultShowDownload),1),g(i("input",{type:"radio",id:"show-download-yes",value:1,"onUpdate:modelValue":n[12]||(n[12]=l=>D.value=l)},null,512),[[k,D.value]]),i("label",fl,t(a[e.lang].yes),1),g(i("input",{type:"radio",id:"show-download-no",value:0,"onUpdate:modelValue":n[13]||(n[13]=l=>D.value=l)},null,512),[[k,D.value]]),i("label",zl,t(a[e.lang].no),1)]),i("h2",null,t(a[e.lang].hardcodedINI),1),g(i("textarea",{class:"textarea",placeholder:a[e.lang].hardcodedINIPlacehoder,"onUpdate:modelValue":n[14]||(n[14]=l=>U.value=l),rows:"5"},null,8,ql),[[te,U.value]]),i("h2",null,t(a[e.lang].resultShow),1),_.value==="spc"?(h(),y("div",kl,[i("b",null,t(a[e.lang].downloadSPCBinaryCommand),1),i("div",El,[ne(" curl -o spc.tgz https://dl.static-php.dev/static-php-cli/spc-bin/nightly/spc-"+t(v.value)+"-"+t(B.value)+".tar.gz && tar -zxvf spc.tgz && rm spc.tgz",1),_l])])):j("",!0),D.value?(h(),y("div",Sl,[i("b",null,t(a[e.lang].downloadExtOnlyCommand),1),i("div",Cl,t($.value)+" download --with-php="+t(S.value)+' --for-extensions "'+t(R.value)+'"'+t(q.value?" --debug":""),1)])):(h(),y("div",Dl,[i("b",null,t(a[e.lang].downloadAllCommand),1),i("div",Il,t($.value)+" download --all --with-php="+t(S.value)+t(q.value?" --debug":""),1)])),i("div",Ll,[i("b",null,t(a[e.lang].compileCommand),1),i("div",Nl,t($.value)+" build "+t(F.value)+' "'+t(R.value)+'"'+t(J.value)+t(q.value?" --debug":"")+t(C.value?" --enable-zts":"")+t(X.value),1)])]))}}),Al=de(Vl,[["__scopeId","data-v-1cdb3adf"]]);export{Al as C};
