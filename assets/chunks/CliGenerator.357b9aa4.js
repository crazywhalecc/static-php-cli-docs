import{d as G,g as C,h as d,o as i,c as u,k as e,t as l,F as E,G as I,a2 as s,a3 as k,e as V,a4 as m,a5 as A,a as L,a6 as D,p as M,m as Z,_ as j}from"./framework.a73c7ff7.js";const x=t=>(M("data-v-bd8b9bd4"),t=t(),Z(),t),H={class:"box"},R={class:"ext-item"},F=["id","value"],X=["for"],Y={class:"box"},$={class:"ext-item"},J=["id","value"],K=["for"],Q={class:"option-line"},W={class:"option-title"},ee={value:"native"},le={value:"spc"},oe={value:"docker"},ne={key:0,class:"option-line"},te={class:"option-title"},ae=x(()=>e("option",{value:"linux-x86_64"},"Linux x86_64 (amd64)",-1)),se=x(()=>e("option",{value:"linux-aarch64"},"Linux aarch64 (arm64)",-1)),de=x(()=>e("option",{value:"macos-x86_64"},"macOS x86_64 (Intel)",-1)),ie=x(()=>e("option",{value:"macos-aarch64"},"macOS arm64 (Apple)",-1)),ue=[ae,se,de,ie],ce={class:"option-line"},re={class:"option-title"},me=["value"],ve={class:"option-line"},pe={class:"option-title"},be={for:"debug-yes"},he={for:"debug-no"},ge={class:"option-line"},xe={class:"option-title"},ye={for:"zts-yes"},we={for:"zts-no"},_e={class:"option-line"},fe={class:"option-title"},Se={for:"show-download-yes"},Ce={for:"show-download-no"},Ee=["placeholder"],Ie={key:1,class:"command-container"},ke={class:"command-preview"},Ne=x(()=>e("br",null,null,-1)),ze={key:2,class:"command-container"},Ve={class:"command-preview"},De={key:3,class:"command-container"},Oe={class:"command-preview"},Pe={class:"command-container"},Te={class:"command-preview"},qe={name:"CliGenerator"},Ue=G({...qe,props:{lang:{type:String,default:"zh"}},setup(t){const O=["7.4","8.0","8.1","8.2"],a={zh:{selectExt:"选择扩展",buildTarget:"选择编译目标",buildOptions:"编译选项",buildEnvironment:"编译环境",buildEnvNative:"本地构建（Git 源码）",buildEnvSpc:"本地构建（独立 spc 二进制）",buildEnvDocker:"Alpine Docker 构建",useDebug:"是否开启调试输出",yes:"是",no:"否",resultShow:"结果展示",selectCommon:"选择常用扩展",selectNone:"全部取消选择",useZTS:"是否编译线程安全版",hardcodedINI:"硬编码 INI 选项",hardcodedINIPlacehoder:"如需要硬编码 ini，每行写一个，例如：memory_limit=2G",resultShowDownload:"是否展示仅下载对应扩展依赖的命令",downloadExtOnlyCommand:"只下载对应扩展的依赖包命令",downloadAllCommand:"下载所有依赖包命令",compileCommand:"编译命令",downloadPhpVersion:"下载 PHP 版本",downloadSPCBinaryCommand:"下载 spc 二进制命令",selectedOS:"选择操作系统"},en:{selectExt:"Select Extensions",buildTarget:"Build Target",buildOptions:"Build Options",buildEnvironment:"Build Environment",buildEnvNative:"Native build (Git source code)",buildEnvSpc:"Native build (standalone spc binary)",buildEnvDocker:"Alpine docker build",useDebug:"Enable debug message",yes:"Yes",no:"No",resultShow:"Result",selectCommon:"Select common extensions",selectNone:"Unselect all",useZTS:"Enable ZTS",hardcodedINI:"Hardcoded INI options",hardcodedINIPlacehoder:"If you need to hardcode ini, write one per line, for example: memory_limit=2G",resultShowDownload:"Download with corresponding extension dependencies",downloadExtOnlyCommand:"Download sources by extensions command",downloadAllCommand:"Download all sources command",compileCommand:"Compile command",downloadPhpVersion:"Download PHP version",downloadSPCBinaryCommand:"Download spc binary command",selectedOS:"Select Build OS"}},P=["apcu","bcmath","bz2","calendar","ctype","curl","dba","dom","event","exif","ffi","filter","fileinfo","gd","glfw","gmp","iconv","imagick","imap","inotify","intl","ldap","mbstring","mbregex","memcache","mongodb","mysqli","mysqlnd","opcache","openssl","pcntl","pdo","pdo_mysql","pdo_sqlite","pdo_pgsql","pgsql","phar","posix","protobuf","rar","readline","redis","session","shmop","simplexml","snappy","soap","sockets","sodium","sqlite3","ssh2","swow","swoole","sysvmsg","sysvsem","sysvshm","tokenizer","xlswriter","xml","xmlreader","xmlwriter","xsl","zip","zlib","zstd"],T=["cli","fpm","micro","embed","all"],q=()=>{v.value=["apcu","bcmath","calendar","ctype","curl","dba","dom","exif","filter","fileinfo","gd","iconv","intl","mbstring","mbregex","mysqli","mysqlnd","openssl","opcache","pcntl","pdo","pdo_mysql","pdo_sqlite","pdo_pgsql","pgsql","phar","posix","readline","redis","session","simplexml","sockets","sodium","sqlite3","tokenizer","xml","xmlreader","xmlwriter","xsl","zip","zlib"]},N=C(()=>v.value.join(",")),v=d([]),c=d(["cli"]),p=d("native"),y=d("8.2"),r=d(0),b=d(0),h=d(0),w=d(""),_=d("linux-x86_64"),f=C(()=>{switch(p.value){case"native":return"bin/spc";case"spc":return"./spc";case"docker":return"bin/spc-alpine-docker";default:return""}}),z=d("--build-cli"),U=C(()=>{const g=w.value.split(`
`);let n=[];return g.forEach(o=>{o.indexOf("=")>=1&&n.push(o)})," "+n.map(o=>'-I "'+o+'"').join(" ")}),B=g=>{let n;c.value.indexOf("all")!==-1&&g.target.value==="all"?c.value=["all"]:(n=c.value.indexOf("all"))!==-1&&g.target.value!=="all"&&c.value.splice(n,1),z.value=c.value.map(o=>"--build-"+o).join(" ")};return(g,n)=>(i(),u("div",null,[e("h2",null,l(a[t.lang].selectExt),1),e("div",H,[(i(),u(E,null,I(P,o=>e("div",R,[s(e("input",{type:"checkbox",id:o,value:o,"onUpdate:modelValue":n[0]||(n[0]=S=>v.value=S)},null,8,F),[[D,v.value]]),e("label",{for:o},l(o),9,X)])),64))]),e("div",{class:"my-btn",onClick:q},l(a[t.lang].selectCommon),1),e("div",{class:"my-btn",onClick:n[1]||(n[1]=o=>v.value=[])},l(a[t.lang].selectNone),1),e("h2",null,l(a[t.lang].buildTarget),1),e("div",Y,[(i(),u(E,null,I(T,o=>e("div",$,[s(e("input",{type:"checkbox",id:"build_"+o,value:o,"onUpdate:modelValue":n[2]||(n[2]=S=>c.value=S),onChange:B},null,40,J),[[D,c.value]]),e("label",{for:"build_"+o},l(o),9,K)])),64))]),e("h2",null,l(a[t.lang].buildOptions),1),e("div",Q,[e("span",W,l(a[t.lang].buildEnvironment),1),s(e("select",{"onUpdate:modelValue":n[3]||(n[3]=o=>p.value=o)},[e("option",ee,l(a[t.lang].buildEnvNative),1),e("option",le,l(a[t.lang].buildEnvSpc),1),e("option",oe,l(a[t.lang].buildEnvDocker),1)],512),[[k,p.value]])]),p.value==="spc"?(i(),u("div",ne,[e("span",te,l(a[t.lang].selectedOS),1),s(e("select",{"onUpdate:modelValue":n[4]||(n[4]=o=>_.value=o)},ue,512),[[k,_.value]])])):V("",!0),e("div",ce,[e("span",re,l(a[t.lang].downloadPhpVersion),1),s(e("select",{"onUpdate:modelValue":n[5]||(n[5]=o=>y.value=o)},[(i(),u(E,null,I(O,o=>e("option",{value:o},l(o),9,me)),64))],512),[[k,y.value]])]),e("div",ve,[e("span",pe,l(a[t.lang].useDebug),1),s(e("input",{type:"radio",id:"debug-yes",value:1,"onUpdate:modelValue":n[6]||(n[6]=o=>r.value=o)},null,512),[[m,r.value]]),e("label",be,l(a[t.lang].yes),1),s(e("input",{type:"radio",id:"debug-no",value:0,"onUpdate:modelValue":n[7]||(n[7]=o=>r.value=o)},null,512),[[m,r.value]]),e("label",he,l(a[t.lang].no),1)]),e("div",ge,[e("span",xe,l(a[t.lang].useZTS),1),s(e("input",{type:"radio",id:"zts-yes",value:1,"onUpdate:modelValue":n[8]||(n[8]=o=>b.value=o)},null,512),[[m,b.value]]),e("label",ye,l(a[t.lang].yes),1),s(e("input",{type:"radio",id:"zts-no",value:0,"onUpdate:modelValue":n[9]||(n[9]=o=>b.value=o)},null,512),[[m,b.value]]),e("label",we,l(a[t.lang].no),1)]),e("div",_e,[e("span",fe,l(a[t.lang].resultShowDownload),1),s(e("input",{type:"radio",id:"show-download-yes",value:1,"onUpdate:modelValue":n[10]||(n[10]=o=>h.value=o)},null,512),[[m,h.value]]),e("label",Se,l(a[t.lang].yes),1),s(e("input",{type:"radio",id:"show-download-no",value:0,"onUpdate:modelValue":n[11]||(n[11]=o=>h.value=o)},null,512),[[m,h.value]]),e("label",Ce,l(a[t.lang].no),1)]),e("h2",null,l(a[t.lang].hardcodedINI),1),s(e("textarea",{class:"textarea",placeholder:a[t.lang].hardcodedINIPlacehoder,"onUpdate:modelValue":n[12]||(n[12]=o=>w.value=o),rows:"5"},null,8,Ee),[[A,w.value]]),e("h2",null,l(a[t.lang].resultShow),1),p.value==="spc"?(i(),u("div",Ie,[e("b",null,l(a[t.lang].downloadSPCBinaryCommand),1),e("div",ke,[L(" curl -o spc.tgz https://dl.static-php.dev/static-php-cli/spc-bin/nightly/spc-"+l(_.value)+".tar.gz && tar -zxvf spc.tgz && rm spc.tgz",1),Ne])])):V("",!0),h.value?(i(),u("div",ze,[e("b",null,l(a[t.lang].downloadExtOnlyCommand),1),e("div",Ve,l(f.value)+" download --with-php="+l(y.value)+' --for-extensions "'+l(N.value)+'"'+l(r.value?" --debug":""),1)])):(i(),u("div",De,[e("b",null,l(a[t.lang].downloadAllCommand),1),e("div",Oe,l(f.value)+" download --all --with-php="+l(y.value)+l(r.value?" --debug":""),1)])),e("div",Pe,[e("b",null,l(a[t.lang].compileCommand),1),e("div",Te,l(f.value)+" build "+l(z.value)+' "'+l(N.value)+'"'+l(r.value?" --debug":"")+l(b.value?" --enable-zts":"")+l(U.value),1)])]))}});const Ge=j(Ue,[["__scopeId","data-v-bd8b9bd4"]]);export{Ge as C};
