import{d as te,h as x,k as j,y as G,o as p,c as r,m as s,t,F as L,E as O,e as z,a1 as m,a2 as X,a3 as k,a4 as ne,a as oe,a5 as M,q as ae,s as de,_ as ce}from"./framework.GQ61FypF.js";const ue={type:"external","arg-type":"custom",source:"amqp","lib-depends":["librabbitmq"],"ext-depends-windows":["openssl"]},be={type:"external",source:"apcu"},pe={type:"builtin"},re={type:"builtin","arg-type":"with-prefix","lib-depends":["bzip2"]},ge={type:"builtin"},xe={type:"builtin"},me={type:"builtin","arg-type":"with","lib-depends":["curl"],"ext-depends-windows":["zlib","openssl"]},he={type:"builtin","arg-type":"custom","lib-suggests":["qdbm"]},we={type:"builtin","arg-type":"custom","arg-type-windows":"with","lib-depends":["libxml2","zlib"],"ext-depends-windows":["xml"]},ye={type:"external",source:"ext-ds"},ve={type:"external",source:"ext-event","arg-type":"custom","lib-depends":["libevent"],"ext-depends":["openssl"],"ext-suggests":["sockets"]},fe={type:"builtin"},ze={"arg-type":"custom",type:"builtin","lib-depends-unix":["libffi"],"lib-depends-windows":["libffi-win"]},ke={type:"builtin"},qe={type:"builtin"},_e={type:"builtin","lib-suggests":["openssl"]},Ee={type:"builtin","arg-type":"custom","arg-type-windows":"with","lib-depends":["zlib","libpng"],"ext-depends":["zlib"],"lib-suggests":["libavif","libwebp","libjpeg","freetype"]},Se={type:"builtin","arg-type":"with-prefix","lib-depends":["gettext"]},Ce={type:"external","arg-type":"custom",source:"ext-glfw","lib-depends":["glfw"],"lib-depends-windows":[]},De={type:"builtin","arg-type":"with-prefix","lib-depends":["gmp"]},Ie={type:"builtin","arg-type":"with-prefix","arg-type-windows":"with","lib-depends-unix":["libiconv"],"lib-depends-windows":["libiconv-win"]},Pe={type:"external",source:"igbinary"},Ue={type:"external",source:"ext-imagick","arg-type":"custom","lib-depends":["imagemagick"]},Ne={type:"builtin","arg-type":"custom","lib-depends":["imap"],"lib-suggests":["openssl"]},Le={type:"external",source:"inotify"},Oe={type:"builtin","lib-depends":["icu"]},Ve={type:"builtin","arg-type":"with-prefix","lib-depends":["ldap"],"lib-suggests":["gmp","libsodium"],"ext-suggests":["openssl"]},Ae={type:"builtin","arg-type":"custom","ext-depends":["mbstring"],"lib-depends":["onig"]},Te={type:"builtin","arg-type":"custom"},je={type:"external",source:"ext-memcache","arg-type":"custom","lib-depends":["zlib"],"ext-depends":["session"]},Be={type:"external",source:"memcached","arg-type":"custom","cpp-extension":!0,"lib-depends":["libmemcached"],"ext-depends":["session","zlib"]},$e={type:"external",source:"mongodb","arg-type":"custom","lib-suggests":["icu","openssl","zstd","zlib"]},We={type:"builtin","arg-type":"with","ext-depends":["mysqlnd"]},Ge={type:"builtin","arg-type-windows":"with","lib-depends":["zlib"]},Xe={type:"builtin","arg-type":"custom"},Me={type:"builtin","arg-type":"custom","arg-type-windows":"with","lib-depends":["openssl","zlib"],"ext-depends":["zlib"]},Re={type:"builtin","unix-only":!0},He={type:"builtin"},Fe={type:"builtin","arg-type":"with","ext-depends":["pdo","mysqlnd"]},Ze={type:"builtin","arg-type":"with-prefix","ext-depends":["pdo","pgsql"],"lib-depends":["postgresql"]},Qe={type:"builtin","arg-type":"with","ext-depends":["pdo","sqlite3"],"lib-depends":["sqlite"]},Ke={type:"external",source:"pdo_sqlsrv","arg-type":"with","ext-depends":["pdo","sqlsrv"]},Ye={type:"builtin","arg-type":"with-prefix","lib-depends":["postgresql"]},Je={type:"builtin","ext-depends":["zlib"]},es={type:"builtin","unix-only":!0},ss={type:"external",source:"protobuf"},is={type:"external",source:"rar","cpp-extension":!0},ls={type:"builtin","arg-type":"with-prefix","lib-depends":["readline"]},ts={type:"external",source:"redis","arg-type":"custom","ext-suggests":["session","igbinary"],"lib-suggests":["zstd","liblz4"]},ns={type:"builtin"},os={type:"builtin"},as={type:"external",source:"ext-simdjson","cpp-extension":!0},ds={type:"builtin","arg-type":"custom","lib-depends":["libxml2"],"ext-depends-windows":["xml"]},cs={type:"external",source:"ext-snappy","cpp-extension":!0,"arg-type":"custom","lib-depends":["snappy"],"ext-suggest":["apcu"]},us={type:"builtin","arg-type":"custom","lib-depends":["libxml2"],"ext-depends-windows":["xml"]},bs={type:"builtin"},ps={type:"builtin","arg-type":"with","lib-depends":["libsodium"]},rs={type:"builtin","arg-type":"with-prefix","arg-type-windows":"with","lib-depends":["sqlite"]},gs={type:"external",source:"sqlsrv","lib-depends":["unixodbc"],"ext-depends-linux":["pcntl"],"cpp-extension":!0},xs={type:"external",source:"ext-ssh2","arg-type":"with-prefix","arg-type-windows":"with","lib-depends":["libssh2"],"ext-depends-windows":["openssl","zlib"]},ms={type:"external",source:"swoole","arg-type":"custom","cpp-extension":!0,"unix-only":!0,"lib-depends":["libcares","brotli","nghttp2","zlib"],"ext-depends":["openssl","curl"],"ext-suggests":["swoole-hook-pgsql","swoole-hook-mysql","swoole-hook-sqlite"]},hs={type:"external",source:"swow","arg-type":"custom","lib-suggests":["openssl","curl"],"ext-suggests":["openssl","curl"]},ws={type:"builtin","unix-only":!0},ys={type:"builtin","unix-only":!0},vs={type:"builtin"},fs={type:"builtin","arg-type":"with-prefix","lib-depends":["tidy"]},zs={type:"builtin"},ks={type:"external",source:"ext-uuid","arg-type":"with-prefix","lib-depends":["libuuid"]},qs={type:"external",source:"ext-uv","arg-type":"with-prefix","lib-depends":["libuv"],"ext-depends":["sockets"]},_s={type:"external",source:"xhprof","ext-depends":["ctype"]},Es={type:"external",source:"xlswriter","arg-type":"custom","ext-depends":["zlib","zip"]},Ss={type:"builtin","arg-type":"custom","arg-type-windows":"with","lib-depends":["libxml2"],"ext-depends-windows":["iconv"]},Cs={type:"builtin","arg-type":"custom","lib-depends":["libxml2"],"ext-depends-windows":["xml","dom"]},Ds={type:"builtin","arg-type":"custom","lib-depends":["libxml2"],"ext-depends-windows":["xml"]},Is={type:"builtin","arg-type":"with-prefix","lib-depends":["libxslt"],"ext-depends":["xml","dom"]},Ps={type:"external",source:"yac","arg-type-unix":"custom","ext-depends-unix":["igbinary"]},Us={type:"external",source:"yaml","arg-type":"with-prefix","lib-depends":["libyaml"]},Ns={type:"builtin","arg-type":"with-prefix","arg-type-windows":"enable","lib-depends":["libzip"]},Ls={type:"builtin","arg-type":"custom","arg-type-windows":"enable","lib-depends":["zlib"]},Os={type:"external",source:"ext-zstd","arg-type":"custom","lib-depends":["zstd"]},Vs={amqp:ue,apcu:be,bcmath:pe,bz2:re,calendar:ge,ctype:xe,curl:me,dba:he,dom:we,ds:ye,event:ve,exif:fe,ffi:ze,fileinfo:ke,filter:qe,ftp:_e,gd:Ee,gettext:Se,glfw:Ce,gmp:De,iconv:Ie,igbinary:Pe,imagick:Ue,imap:Ne,inotify:Le,intl:Oe,ldap:Ve,mbregex:Ae,mbstring:Te,memcache:je,memcached:Be,mongodb:$e,mysqli:We,mysqlnd:Ge,opcache:Xe,openssl:Me,"password-argon2":{type:"builtin","arg-type":"with-prefix","lib-depends":["libargon2"]},pcntl:Re,pdo:He,pdo_mysql:Fe,pdo_pgsql:Ze,pdo_sqlite:Qe,pdo_sqlsrv:Ke,pgsql:Ye,phar:Je,posix:es,protobuf:ss,rar:is,readline:ls,redis:ts,session:ns,shmop:os,simdjson:as,simplexml:ds,snappy:cs,soap:us,sockets:bs,sodium:ps,sqlite3:rs,sqlsrv:gs,ssh2:xs,swoole:ms,"swoole-hook-mysql":{type:"addon","arg-type":"custom","ext-depends":["mysqlnd","pdo","pdo_mysql"],"ext-suggests":["mysqli"]},"swoole-hook-pgsql":{type:"addon","arg-type":"custom","ext-depends":["pgsql","pdo"]},"swoole-hook-sqlite":{type:"addon","arg-type":"custom","ext-depends":["sqlite3","pdo"]},swow:hs,sysvmsg:ws,sysvsem:ys,sysvshm:vs,tidy:fs,tokenizer:zs,uuid:ks,uv:qs,xhprof:_s,xlswriter:Es,xml:Ss,xmlreader:Cs,xmlwriter:Ds,xsl:Is,yac:Ps,yaml:Us,zip:Ns,zlib:Ls,zstd:Os},As={source:"brotli","static-libs-unix":["libbrotlidec.a","libbrotlienc.a","libbrotlicommon.a"],"static-libs-windows":["brotlicommon.lib","brotlienc.lib","brotlidec.lib"],headers:["brotli"]},Ts={source:"bzip2","static-libs-unix":["libbz2.a"],"static-libs-windows":[["libbz2.lib","libbz2_a.lib"]],headers:["bzlib.h"]},js={source:"curl","static-libs-unix":["libcurl.a"],"static-libs-windows":["libcurl_a.lib"],headers:["curl"],"lib-depends-unix":["openssl","zlib"],"lib-depends-windows":["openssl","zlib","libssh2","nghttp2"],"lib-suggests-unix":["libssh2","brotli","nghttp2","zstd"],"lib-suggests-windows":["brotli","zstd"],frameworks:["CoreFoundation","CoreServices","SystemConfiguration"]},Bs={source:"freetype","static-libs-unix":["libfreetype.a"],"headers-unix":["freetype2/freetype/freetype.h","freetype2/ft2build.h"],"lib-depends":["zlib"],"lib-suggests":["libpng","bzip2","brotli"]},$s={source:"gettext","static-libs-unix":["libintl.a"],"lib-depends":["libiconv"],"lib-suggests":["ncurses","libxml2"],frameworks:["CoreFoundation"]},Ws={source:"ext-glfw","static-libs-unix":["libglfw3.a"],frameworks:["CoreVideo","OpenGL","Cocoa","IOKit"]},Gs={source:"gmp","static-libs-unix":["libgmp.a"],"static-libs-windows":["libgmp.lib"],headers:["gmp.h"]},Xs={source:"icu","cpp-library":!0,"static-libs-unix":["libicui18n.a","libicuio.a","libicuuc.a","libicudata.a"]},Ms={source:"imagemagick","static-libs-unix":["libMagick++-7.Q16HDRI.a","libMagickWand-7.Q16HDRI.a","libMagickCore-7.Q16HDRI.a"],"lib-depends":["zlib","libpng","libjpeg","libwebp","freetype","libtiff"],"lib-suggests":["zstd","xz","bzip2","libzip","libxml2"]},Rs={source:"imap","static-libs-unix":["libc-client.a"],"lib-suggests":["openssl"]},Hs={source:"ldap","static-libs-unix":["liblber.a","libldap.a"],"lib-depends":["openssl","zlib","gmp","libsodium"]},Fs={source:"libargon2","static-libs-unix":["libargon2.a"]},Zs={source:"libavif","static-libs-unix":["libavif.a"]},Qs={source:"libcares","static-libs-unix":["libcares.a"],"headers-unix":["ares.h","ares_dns.h","ares_nameser.h","ares_rules.h"]},Ks={source:"libevent","static-libs-unix":["libevent.a","libevent_core.a","libevent_extra.a","libevent_openssl.a"],"lib-depends":["openssl"]},Ys={source:"libffi","static-libs-unix":["libffi.a"],"static-libs-windows":["libffi.lib"],"headers-unix":["ffi.h","ffitarget.h"],"headers-windows":["ffi.h","fficonfig.h","ffitarget.h"]},Js={source:"libiconv","static-libs-unix":["libiconv.a","libcharset.a"],headers:["iconv.h","libcharset.h","localcharset.h"]},ei={source:"libjpeg","static-libs-unix":["libjpeg.a","libturbojpeg.a"]},si={source:"liblz4","static-libs-unix":["liblz4.a"]},ii={source:"libmemcached","static-libs-unix":["libmemcached.a","libmemcachedutil.a"]},li={source:"libpng","static-libs-unix":["libpng16.a"],"static-libs-windows":["libpng16_static.lib"],"headers-unix":["png.h","pngconf.h","pnglibconf.h"],"headers-windows":["png.h","pngconf.h"],"lib-depends":["zlib"]},ti={source:"librabbitmq","static-libs-unix":["librabbitmq.a"],"static-libs-windows":["rabbitmq.4.lib"],"lib-depends":["openssl"]},ni={source:"libsodium","static-libs-unix":["libsodium.a"]},oi={source:"libssh2","static-libs-unix":["libssh2.a"],"static-libs-windows":["libssh2.lib"],headers:["libssh2.h","libssh2_publickey.h","libssh2_sftp.h"],"lib-depends":["openssl"],"lib-suggests":["zlib"]},ai={source:"libtiff","static-libs-unix":["libtiff.a"]},di={source:"libuuid","static-libs-unix":["libuuid.a"],headers:["uuid/uuid.h"]},ci={source:"libuv","static-libs-unix":["libuv.a"]},ui={source:"libwebp","static-libs-unix":["libwebp.a","libwebpdecoder.a","libwebpdemux.a","libwebpmux.a","libsharpyuv.a"]},bi={source:"libxml2","static-libs-unix":["libxml2.a"],"static-libs-windows":["libxml2s.lib","libxml2_a.lib"],headers:["libxml2"],"lib-depends-unix":["libiconv"],"lib-suggests-unix":["xz","icu","zlib"],"lib-depends-windows":["libiconv-win"],"lib-suggests-windows":["zlib"]},pi={source:"libxslt","static-libs-unix":["libxslt.a","libexslt.a"],"lib-depends":["libxml2"]},ri={source:"libyaml","static-libs-unix":["libyaml.a"],"static-libs-windows":["yaml.lib"],headers:["yaml.h"]},gi={source:"libzip","static-libs-unix":["libzip.a"],"static-libs-windows":[["zip.lib","libzip_a.lib"]],headers:["zip.h","zipconf.h"],"lib-depends":["zlib"],"lib-suggests":["bzip2","xz","zstd","openssl"]},xi={source:"ncurses","static-libs-unix":["libncurses.a"]},mi={source:"nghttp2","static-libs-unix":["libnghttp2.a"],"static-libs-windows":["nghttp2.lib"],headers:["nghttp2"],"lib-depends":["zlib","openssl"],"lib-suggests":["libxml2"]},hi={source:"onig","static-libs-unix":["libonig.a"],"static-libs-windows":["onig.lib","onig_a.lib"],headers:["oniggnu.h","oniguruma.h"]},wi={source:"openssl","static-libs-unix":["libssl.a","libcrypto.a"],"static-libs-windows":["libssl.lib","libcrypto.lib"],headers:["openssl"],"lib-depends":["zlib"]},yi={source:"postgresql","static-libs-unix":["libpq.a","libpgport.a","libpgcommon.a"],"lib-depends":["libiconv","libxml2","openssl","zlib","readline"],"lib-suggests":["icu","libxslt","ldap","zstd"]},vi={source:"qdbm","static-libs-unix":["libqdbm.a"],"static-libs-windows":["qdbm_a.lib"],"headers-windows":["depot.h"]},fi={source:"readline","static-libs-unix":["libreadline.a"],"lib-depends":["ncurses"]},zi={source:"snappy","static-libs-unix":["libsnappy.a"],"headers-unix":["snappy.h","snappy-c.h","snappy-sinksource.h","snappy-stubs-public.h"],"lib-depends":["zlib"]},ki={source:"sqlite","static-libs-unix":["libsqlite3.a"],"static-libs-windows":["libsqlite3_a.lib"],headers:["sqlite3.h","sqlite3ext.h"]},qi={source:"tidy","static-libs-unix":["libtidy.a"]},_i={source:"unixodbc","static-libs-unix":["libodbc.a","libodbccr.a","libodbcinst.a"],"lib-depends":["libiconv"]},Ei={source:"xz","static-libs-unix":["liblzma.a"],"static-libs-windows":[["liblzma.lib","liblzma_a.lib"]],"headers-unix":["lzma"],"headers-windows":["lzma","lzma.h"],"lib-depends":["libiconv"]},Si={source:"zlib","static-libs-unix":["libz.a"],"static-libs-windows":["zlib_a.lib"],headers:["zlib.h","zconf.h"]},Ci={source:"zstd","static-libs-unix":["libzstd.a"],"static-libs-windows":[["zstd.lib","zstd_static.lib"]],"headers-unix":["zdict.h","zstd.h","zstd_errors.h"],"headers-windows":["zstd.h","zstd_errors.h"]},Di={brotli:As,bzip2:Ts,curl:js,freetype:Bs,gettext:$s,glfw:Ws,gmp:Gs,icu:Xs,imagemagick:Ms,imap:Rs,ldap:Hs,libargon2:Fs,libavif:Zs,libcares:Qs,libevent:Ks,libffi:Ys,"libffi-win":{source:"libffi-win","static-libs-windows":["libffi.lib"],"headers-windows":["ffi.h","ffitarget.h","fficonfig.h"]},libiconv:Js,"libiconv-win":{source:"libiconv-win","static-libs-windows":["libiconv.lib","libiconv_a.lib"]},libjpeg:ei,liblz4:si,libmemcached:ii,libpng:li,librabbitmq:ti,libsodium:ni,libssh2:oi,libtiff:ai,libuuid:di,libuv:ci,libwebp:ui,libxml2:bi,libxslt:pi,libyaml:ri,libzip:gi,ncurses:xi,nghttp2:mi,onig:hi,openssl:wi,"pkg-config":{source:"pkg-config"},postgresql:yi,qdbm:vi,readline:fi,snappy:zi,sqlite:ki,tidy:qi,unixodbc:_i,xz:Ei,zlib:Si,zstd:Ci};function S(e,i,a,c){return e.os==="linux"?e[i][a][c+"-linux"]??e[i][a][c+"-unix"]??e[i][a][c]??[]:e.os==="macos"?e[i][a][c+"-macos"]??e[i][a][c+"-unix"]??e[i][a][c]??[]:e.os==="windows"?e[i][a][c+"-windows"]??e[i][a][c]??[]:[]}function Z(e,i){return S(e,"ext",i,"ext-depends")}function Ii(e,i){return S(e,"ext",i,"ext-suggests")}function Pi(e,i){return S(e,"ext",i,"lib-depends")}function Ui(e,i){return S(e,"ext",i,"lib-suggests")}function Q(e,i){return S(e,"lib",i,"lib-depends")}function Ni(e,i){return S(e,"lib",i,"lib-suggests")}function Li(e,i){const a=[],c=new Set,w=[];i.forEach(o=>{c.has(o)||Ai(e,o,c,a)});const f=[];return a.forEach(o=>{i.indexOf(o)===-1&&w.push(o),[...Pi(e,o),...Ui(e,o)].forEach(V=>{f.indexOf(V)===-1&&f.push(V)})}),{exts:a,libs:Oi(e,f),notIncludedExts:w}}function Oi(e,i){const a=[],c=new Set;return i.forEach(w=>{c.has(w)||(console.log("before visited"),console.log(c),Vi(e,w,c,a),console.log("after visited"),console.log(c))}),a}function Vi(e,i,a,c){if(a.has(i))return;a.add(i),[...Q(e,i),...Ni(e,i)].forEach(f=>{K(e,f,a,c)}),c.push(i)}function K(e,i,a,c){a.has(i)||(a.add(i),Q(e,i).forEach(w=>{K(e,w,a,c)}),c.push(i))}function Y(e,i,a,c){a.has(a)||(a.add(i),Z(e,i).forEach(w=>{Y(e,w,a,c)}),c.push(i))}function Ai(e,i,a,c){if(a.has(i))return;a.add(i),[...Z(e,i),...Ii(e,i)].forEach(f=>{Y(e,f,a,c)}),c.push(i)}const C=e=>(ae("data-v-af5993ce"),e=e(),de(),e),Ti={class:"option-line"},ji=["id","value","disabled"],Bi=["for"],$i={class:"box"},Wi={class:"ext-item"},Gi=["id","value","disabled"],Xi=["for"],Mi={class:"details custom-block"},Ri={class:"box"},Hi={class:"ext-item"},Fi=["id","value","disabled"],Zi=["for"],Qi={class:"tip custom-block"},Ki=C(()=>s("p",{class:"custom-block-title"},"TIP",-1)),Yi={class:"box"},Ji={class:"ext-item"},el=["id","value"],sl=["for"],il={key:1,class:"warning custom-block"},ll=C(()=>s("p",{class:"custom-block-title"},"WARNING",-1)),tl={key:2,class:"warning custom-block"},nl=C(()=>s("p",{class:"custom-block-title"},"WARNING",-1)),ol={class:"option-line"},al={class:"option-title"},dl={value:"native"},cl={value:"spc"},ul={key:0,value:"docker"},bl={key:3,class:"option-line"},pl={class:"option-title"},rl=C(()=>s("option",{value:"x86_64"},"x86_64 (amd64)",-1)),gl={key:0,value:"aarch64"},xl={class:"option-line"},ml={class:"option-title"},hl=["value"],wl={class:"option-line"},yl={class:"option-title"},vl={for:"debug-yes"},fl={for:"debug-no"},zl={class:"option-line"},kl={class:"option-title"},ql={for:"zts-yes"},_l={for:"zts-no"},El={class:"option-line"},Sl={class:"option-title"},Cl={for:"show-download-yes"},Dl={for:"show-download-no"},Il={key:4,class:"option-line"},Pl={class:"option-title"},Ul={for:"upx-yes"},Nl={for:"upx-no"},Ll=["placeholder"],Ol={key:5,class:"command-container"},Vl={key:0,class:"command-preview"},Al=C(()=>s("br",null,null,-1)),Tl={key:1},jl={class:"warning custom-block"},Bl=C(()=>s("p",{class:"custom-block-title"},"WARNING",-1)),$l={key:6,class:"command-container"},Wl={class:"command-preview"},Gl={key:7,class:"command-container"},Xl={class:"command-preview"},Ml={key:8,class:"command-container"},Rl={class:"command-preview"},Hl={class:"command-container"},Fl={class:"command-preview"},Zl={name:"CliGenerator"},Ql=te({...Zl,props:{lang:{type:String,default:"zh"}},setup(e){const i=x(Vs),a=x(Di),c=x([]),w=[{os:"linux",label:"Linux",disabled:!1},{os:"macos",label:"macOS",disabled:!1},{os:"windows",label:"Windows",disabled:!1}],f=["7.4","8.0","8.1","8.2","8.3"],o={zh:{selectExt:"选择扩展",buildTarget:"选择编译目标",buildOptions:"编译选项",buildEnvironment:"编译环境",buildEnvNative:"本地构建（Git 源码）",buildEnvSpc:"本地构建（独立 spc 二进制）",buildEnvDocker:"Alpine Docker 构建",useDebug:"是否开启调试输出",yes:"是",no:"否",resultShow:"结果展示",selectCommon:"选择常用扩展",selectNone:"全部取消选择",useZTS:"是否编译线程安全版",hardcodedINI:"硬编码 INI 选项",hardcodedINIPlacehoder:"如需要硬编码 ini，每行写一个，例如：memory_limit=2G",resultShowDownload:"是否展示仅下载对应扩展依赖的命令",downloadExtOnlyCommand:"只下载对应扩展的依赖包命令",downloadAllCommand:"下载所有依赖包命令",downloadUPXCommand:"下载 UPX 命令",compileCommand:"编译命令",downloadPhpVersion:"下载 PHP 版本",downloadSPCBinaryCommand:"下载 spc 二进制命令",selectedArch:"选择系统架构",selectedSystem:"选择操作系统",buildLibs:"要构建的库",depTips:"选择扩展后，不可选中的项目为必需的依赖，编译的依赖库列表中可选的为现有扩展和依赖库的可选依赖。选择可选依赖后，将生成 --with-libs 参数。",microUnavailable:"micro 不支持 PHP 7.4 及更早版本！",windowsSAPIUnavailable:"Windows 目前不支持 fpm、embed 构建！",useUPX:"是否开启 UPX 压缩（减小二进制体积）",windowsDownSPCWarning:"Windows 下请手动下载 spc.exe 二进制文件并解压到当前目录！"},en:{selectExt:"Select Extensions",buildTarget:"Build Target",buildOptions:"Build Options",buildEnvironment:"Build Environment",buildEnvNative:"Native build (Git source code)",buildEnvSpc:"Native build (standalone spc binary)",buildEnvDocker:"Alpine docker build",useDebug:"Enable debug message",yes:"Yes",no:"No",resultShow:"Result",selectCommon:"Select common extensions",selectNone:"Unselect all",useZTS:"Enable ZTS",hardcodedINI:"Hardcoded INI options",hardcodedINIPlacehoder:"If you need to hardcode ini, write one per line, for example: memory_limit=2G",resultShowDownload:"Download with corresponding extension dependencies",downloadExtOnlyCommand:"Download sources by extensions command",downloadAllCommand:"Download all sources command",downloadUPXCommand:"Download UPX command",compileCommand:"Compile command",downloadPhpVersion:"Download PHP version",downloadSPCBinaryCommand:"Download spc binary command",selectedArch:"Select build architecture",selectedSystem:"Select Build OS",buildLibs:"Select Dependencies",depTips:"After selecting the extensions, the unselectable items are essential dependencies. In the compiled dependencies list, optional dependencies consist of existing extensions and optional dependencies of libraries. Optional dependencies will be added in --with-libs parameter.",microUnavailable:"Micro does not support PHP 7.4 and earlier versions!",windowsSAPIUnavailable:"Windows does not support fpm and embed build!",useUPX:"Enable UPX compression (reduce binary size)",windowsDownSPCWarning:"Please download the spc.exe binary file manually and extract it to the current directory on Windows!"}},R=["cli","fpm","micro","embed","all"],V=()=>{y.value=["apcu","bcmath","calendar","ctype","curl","dba","dom","exif","filter","fileinfo","gd","iconv","intl","mbstring","mbregex","mysqli","mysqlnd","openssl","opcache","pcntl","pdo","pdo_mysql","pdo_sqlite","pdo_pgsql","pgsql","phar","posix","readline","redis","session","simplexml","sockets","sodium","sqlite3","tokenizer","xml","xmlreader","xmlwriter","xsl","zip","zlib"]},H=j(()=>y.value.join(",")),J=j(()=>{const h=q.value.filter(n=>A.value.indexOf(n)===-1);return h.length>0?' --with-libs="'+h.join(",")+'"':""}),y=x([]),q=x([]),B=x([]),A=x([]),v=x(["cli"]),D=x("native"),I=x("8.2"),_=x(0),P=x(0),U=x(1),E=x(0),$=x(""),b=x("linux"),W=x("x86_64"),T=j(()=>{switch(D.value){case"native":return"bin/spc";case"spc":return b.value==="windows"?".\\spc.exe":"./spc";case"docker":return"bin/spc-alpine-docker";default:return""}}),F=x("--build-cli"),ee=j(()=>{const h=$.value.split(`
`);let n=[];return h.forEach(l=>{l.indexOf("=")>=1&&n.push(l)})," "+n.map(l=>'-I "'+l+'"').join(" ")}),se=h=>{let n;v.value.indexOf("all")!==-1&&h.target.value==="all"?v.value=["all"]:(n=v.value.indexOf("all"))!==-1&&h.target.value!=="all"&&v.value.splice(n,1),F.value=v.value.map(l=>"--build-"+l).join(" ")},ie=h=>{const n=new Set,l=u=>{let d=[];if(b.value==="linux"){if(d=i.value[u]["ext-depends-linux"]??i.value[u]["ext-depends-unix"]??i.value[u]["ext-depends"]??[],d.length===0)return}else if(b.value==="macos"){if(d=i.value[u]["ext-depends-macos"]??i.value[u]["ext-depends-unix"]??i.value[u]["ext-depends"]??[],d.length===0)return}else if(b.value==="windows"&&(d=i.value[u]["ext-depends-windows"]??i.value[u]["ext-depends"]??[],d.length===0))return;d.forEach(g=>{n.add(g),l(g)})};return h.forEach(u=>{l(u)}),Array.from(n)},le=h=>{const n=new Set,l=d=>{let g=[];if(b.value==="linux"){if(g=a.value[d]["lib-depends-linux"]??a.value[d]["lib-depends-unix"]??a.value[d]["lib-depends"]??[],g.length===0)return}else if(b.value==="macos"){if(g=a.value[d]["lib-depends-macos"]??a.value[d]["lib-depends-unix"]??a.value[d]["lib-depends"]??[],g.length===0)return}else if(b.value==="windows"&&(g=a.value[d]["lib-depends-windows"]??a.value[d]["lib-depends"]??[],g.length===0))return;g.forEach(N=>{n.add(N),l(N)})},u=d=>{let g=[];if(b.value==="linux"){if(g=i.value[d]["lib-depends-linux"]??i.value[d]["lib-depends-unix"]??i.value[d]["lib-depends"]??[],g.length===0)return}else if(b.value==="macos"){if(g=i.value[d]["lib-depends-macos"]??i.value[d]["lib-depends-unix"]??i.value[d]["lib-depends"]??[],g.length===0)return}else if(b.value==="windows"&&(g=i.value[d]["lib-depends-windows"]??i.value[d]["lib-depends"]??[],g.length===0))return;g.forEach(N=>{n.add(N),l(N)})};return h.forEach(d=>{u(d)}),Array.from(n)};return G(b,()=>y.value=[]),G(b,()=>E.value=0),G(y,h=>{B.value=ie(h),B.value.forEach(l=>{y.value.indexOf(l)===-1&&y.value.push(l)}),y.value.sort(),console.log("检测到变化！"),console.log(h);const n=Li({ext:i.value,lib:a.value,os:b.value},y.value);c.value=n.libs.sort(),q.value=[],A.value=le(n.exts),A.value.forEach(l=>{q.value.indexOf(l)===-1&&q.value.push(l)})}),(h,n)=>(p(),r("div",null,[s("h2",null,t(o[e.lang].selectedSystem),1),s("div",Ti,[(p(),r(L,null,O(w,(l,u)=>s("span",{key:u,style:{"margin-right":"4px"}},[m(s("input",{type:"radio",id:"os-"+l.os,value:l.os,disabled:l.disabled===!0,"onUpdate:modelValue":n[0]||(n[0]=d=>b.value=d)},null,8,ji),[[k,b.value]]),s("label",{for:"os-"+l.os},t(l.label),9,Bi)])),64))]),s("h2",null,t(o[e.lang].selectExt)+t(y.value.length>0?" ("+y.value.length+")":""),1),s("div",$i,[(p(!0),r(L,null,O(i.value,(l,u)=>(p(),r("div",Wi,[m(s("input",{type:"checkbox",id:u,value:u,"onUpdate:modelValue":n[1]||(n[1]=d=>y.value=d),disabled:B.value.indexOf(u)!==-1},null,8,Gi),[[M,y.value]]),s("label",{for:u},t(u),9,Xi)]))),256))]),b.value!=="windows"?(p(),r("div",{key:0,class:"my-btn",onClick:V},t(o[e.lang].selectCommon),1)):z("",!0),s("div",{class:"my-btn",onClick:n[2]||(n[2]=l=>y.value=[])},t(o[e.lang].selectNone),1),s("details",Mi,[s("summary",null,t(o[e.lang].buildLibs)+t(q.value.length>0?" ("+q.value.length+")":""),1),s("div",Ri,[(p(!0),r(L,null,O(c.value,(l,u)=>(p(),r("div",Hi,[m(s("input",{type:"checkbox",id:u,value:l,"onUpdate:modelValue":n[3]||(n[3]=d=>q.value=d),disabled:A.value.indexOf(l)!==-1},null,8,Fi),[[M,q.value]]),s("label",{for:u},t(l),9,Zi)]))),256))])]),s("div",Qi,[Ki,s("p",null,t(o[e.lang].depTips),1)]),s("h2",null,t(o[e.lang].buildTarget),1),s("div",Yi,[(p(),r(L,null,O(R,l=>s("div",Ji,[m(s("input",{type:"checkbox",id:"build_"+l,value:l,"onUpdate:modelValue":n[4]||(n[4]=u=>v.value=u),onChange:se},null,40,el),[[M,v.value]]),s("label",{for:"build_"+l},t(l),9,sl)])),64))]),I.value==="7.4"&&(v.value.indexOf("micro")!==-1||v.value.indexOf("all")!==-1)?(p(),r("div",il,[ll,s("p",null,t(o[e.lang].microUnavailable),1)])):z("",!0),b.value==="windows"&&(v.value.indexOf("fpm")!==-1||v.value.indexOf("embed")!==-1)?(p(),r("div",tl,[nl,s("p",null,t(o[e.lang].windowsSAPIUnavailable),1)])):z("",!0),s("h2",null,t(o[e.lang].buildOptions),1),s("div",ol,[s("span",al,t(o[e.lang].buildEnvironment),1),m(s("select",{"onUpdate:modelValue":n[5]||(n[5]=l=>D.value=l)},[s("option",dl,t(o[e.lang].buildEnvNative),1),s("option",cl,t(o[e.lang].buildEnvSpc),1),b.value!=="windows"?(p(),r("option",ul,t(o[e.lang].buildEnvDocker),1)):z("",!0)],512),[[X,D.value]])]),D.value==="spc"?(p(),r("div",bl,[s("span",pl,t(o[e.lang].selectedArch),1),m(s("select",{"onUpdate:modelValue":n[6]||(n[6]=l=>W.value=l)},[rl,b.value!=="windows"?(p(),r("option",gl,"aarch64 (arm64)")):z("",!0)],512),[[X,W.value]])])):z("",!0),s("div",xl,[s("span",ml,t(o[e.lang].downloadPhpVersion),1),m(s("select",{"onUpdate:modelValue":n[7]||(n[7]=l=>I.value=l)},[(p(),r(L,null,O(f,l=>s("option",{value:l},t(l),9,hl)),64))],512),[[X,I.value]])]),s("div",wl,[s("span",yl,t(o[e.lang].useDebug),1),m(s("input",{type:"radio",id:"debug-yes",value:1,"onUpdate:modelValue":n[8]||(n[8]=l=>_.value=l)},null,512),[[k,_.value]]),s("label",vl,t(o[e.lang].yes),1),m(s("input",{type:"radio",id:"debug-no",value:0,"onUpdate:modelValue":n[9]||(n[9]=l=>_.value=l)},null,512),[[k,_.value]]),s("label",fl,t(o[e.lang].no),1)]),s("div",zl,[s("span",kl,t(o[e.lang].useZTS),1),m(s("input",{type:"radio",id:"zts-yes",value:1,"onUpdate:modelValue":n[10]||(n[10]=l=>P.value=l)},null,512),[[k,P.value]]),s("label",ql,t(o[e.lang].yes),1),m(s("input",{type:"radio",id:"zts-no",value:0,"onUpdate:modelValue":n[11]||(n[11]=l=>P.value=l)},null,512),[[k,P.value]]),s("label",_l,t(o[e.lang].no),1)]),s("div",El,[s("span",Sl,t(o[e.lang].resultShowDownload),1),m(s("input",{type:"radio",id:"show-download-yes",value:1,"onUpdate:modelValue":n[12]||(n[12]=l=>U.value=l)},null,512),[[k,U.value]]),s("label",Cl,t(o[e.lang].yes),1),m(s("input",{type:"radio",id:"show-download-no",value:0,"onUpdate:modelValue":n[13]||(n[13]=l=>U.value=l)},null,512),[[k,U.value]]),s("label",Dl,t(o[e.lang].no),1)]),b.value!=="macos"?(p(),r("div",Il,[s("span",Pl,t(o[e.lang].useUPX),1),m(s("input",{type:"radio",id:"upx-yes",value:1,"onUpdate:modelValue":n[14]||(n[14]=l=>E.value=l)},null,512),[[k,E.value]]),s("label",Ul,t(o[e.lang].yes),1),m(s("input",{type:"radio",id:"upx-no",value:0,"onUpdate:modelValue":n[15]||(n[15]=l=>E.value=l)},null,512),[[k,E.value]]),s("label",Nl,t(o[e.lang].no),1)])):z("",!0),s("h2",null,t(o[e.lang].hardcodedINI),1),m(s("textarea",{class:"textarea",placeholder:o[e.lang].hardcodedINIPlacehoder,"onUpdate:modelValue":n[16]||(n[16]=l=>$.value=l),rows:"5"},null,8,Ll),[[ne,$.value]]),s("h2",null,t(o[e.lang].resultShow),1),D.value==="spc"?(p(),r("div",Ol,[s("b",null,t(o[e.lang].downloadSPCBinaryCommand),1),b.value!=="windows"?(p(),r("div",Vl,[oe(" curl -o spc.tgz https://dl.static-php.dev/static-php-cli/spc-bin/nightly/spc-"+t(b.value)+"-"+t(W.value)+".tar.gz && tar -zxvf spc.tgz && rm spc.tgz",1),Al])):(p(),r("div",Tl,[s("div",jl,[Bl,s("p",null,t(o[e.lang].windowsDownSPCWarning),1)])]))])):z("",!0),U.value?(p(),r("div",$l,[s("b",null,t(o[e.lang].downloadExtOnlyCommand),1),s("div",Wl,t(T.value)+" download --with-php="+t(I.value)+' --for-extensions "'+t(H.value)+'"'+t(_.value?" --debug":""),1)])):(p(),r("div",Gl,[s("b",null,t(o[e.lang].downloadAllCommand),1),s("div",Xl,t(T.value)+" download --all --with-php="+t(I.value)+t(_.value?" --debug":""),1)])),E.value?(p(),r("div",Ml,[s("b",null,t(o[e.lang].downloadUPXCommand),1),s("div",Rl,t(T.value)+" install-pkg upx"+t(_.value?" --debug":""),1)])):z("",!0),s("div",Hl,[s("b",null,t(o[e.lang].compileCommand),1),s("div",Fl,t(T.value)+" build "+t(F.value)+' "'+t(H.value)+'"'+t(J.value)+t(_.value?" --debug":"")+t(P.value?" --enable-zts":"")+t(E.value?" --with-upx-pack":"")+t(ee.value),1)])]))}}),Yl=ce(Ql,[["__scopeId","data-v-af5993ce"]]);export{Yl as C};
